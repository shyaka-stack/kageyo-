<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Latest announcements from Kageyo TVET School in Gicumbi District, Kaniga Sector">
    <meta name="author" content="jobeuse| yobu| job| iradukunda">
    <title>Announcements | Kageyo TVET School | Gicumbi District</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="download.jpg">
    <link rel="apple-touch-icon" sizes="180x180" href="">
    <meta name="theme-color" content="#1D4ED8">

    <style>
        .banner-bg {
            background-image: url('announcement_banner.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .banner-overlay {
            background-image: linear-gradient(to bottom, rgba(0,123,255,0), rgba(0,123,255,0.9));
        }
        .dropdown-menu {
            display: none;
            transition: all 0.3s ease-in-out;
            z-index: 1000;
        }
        .dropdown-menu.active {
            display: block;
        }
        @media (min-width: 769px) {
            .dropdown-menu {
                position: absolute;
                background-color: #ffffff;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                border-radius: 0.375rem;
                min-width: 12rem;
                top: 100%;
                left: 0;
            }
        }
        @media (max-width: 768px) {
            #loader {
                position: absolute;
                left: 50%;
                top: 50%;
                z-index: 1;
                transform: translate(-50%, -50%);
            }
            .dropdown-menu {
                position: static;
                box-shadow: none;
                background-color: #f3f4f6;
                width: 100%;
                display: none;
            }
            .dropdown-menu.active {
                display: block;
            }
        }
        /* Accessibility styles */
        :focus {
            outline: 3px solid #1D4ED8;
            outline-offset: 2px;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        /* Chatbot styles */
        #chatbot-window {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 360px;
            max-height: 480px;
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            overflow: hidden;
        }
        #chatbot-window.active {
            display: block;
        }
        #chatbot-messages {
            height: 360px;
            overflow-y: auto;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }
        #chatbot-input {
            width: 100%;
            padding: 0.75rem;
            border: none;
            outline: none;
            font-size: 1rem;
        }
        #chatbot-input:focus {
            outline: 2px solid #1D4ED8;
        }
        #chatbot-header {
            background-color: #1D4ED8;
            color: white;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chatbot-user-message {
            background-color: #e3f2fd;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
            align-self: flex-end;
        }
        .chatbot-bot-message {
            background-color: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
        }
        .chatbot-link {
            color: #1D4ED8;
            text-decoration: underline;
        }
        /* Announcement card styles */
        .announcement-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .announcement-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-100 font-roboto" onload="myFunction()">
    <!-- Header -->
    <header class="bg-white shadow" role="banner">
        <div class="bg-blue-600 text-white py-2">
            <div class="container mx-auto px-4 flex justify-end">
                <a href="https://wa.me/1234567890" target="_blank" class="hover:underline" aria-label="Join Kageyo TVET School WhatsApp Group">
                    <i class="fab fa-whatsapp mr-2" aria-hidden="true"></i>Join WhatsApp Group
                </a>
            </div>
        </div>
        <div class="container mx-auto px-4 py-4">
            <nav class="flex flex-wrap items-center justify-between" role="navigation" aria-label="Main navigation">
                <div class="flex items-center space-x-4">
                    <a href="index.html" aria-label="Kageyo TVET School Home">
                        <img src="logo.jpg" alt="Kageyo TVET School Logo" class="w-20 h-20">
                    </a>
                    <div>
                        <h1>
                            <a href="index.html" class="text-2xl font-bold text-blue-600">KAGEYO TVET SCHOOL</a>
                        </h1>
                        <p class="text-sm text-gray-500">WORK - COURAGE - SOLIDARITY</p>
                    </div>
                </div>
                <button class="md:hidden text-blue-600" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="navbar" onclick="toggleNav()">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                    <span class="sr-only">Toggle menu</span>
                </button>
                <div id="navbar" class="hidden md:flex md:items-center w-full md:w-auto mt-4 md:mt-0" role="menu">
                    <ul class="flex flex-col md:flex-row md:space-x-6 w-full md:w-auto">
                        <li><a href="index.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Home</a></li>
                        <li><a href="about.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">About Us</a></li>
                        <li><a href="apply job.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Apply for a Job</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="admin-menu" onclick="toggleDropdown('admin-menu')" role="menuitem">
                                Administration <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle Administration submenu</span>
                            </button>
                            <ul id="admin-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48 z-10" role="menu" aria-labelledby="administration-button">
                                <li><a href="staff.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Staff</a></li>
                            </ul>
                        </li>
                        <li><a href="trainers.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trainers</a></li>
                        <li><a href="trades.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trades</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="more-menu" onclick="toggleDropdown('more-menu')" role="menuitem">
                                More <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle More submenu</span>
                            </button>
                            <ul id="more-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48 z-10" role="menu" aria-labelledby="more-button">
                                <li><a href="news.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">News</a></li>
                                <li><a href="events.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Events</a></li>
                                <li><a href="announcements.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Announcements</a></li>
                                <li><a href="best-performers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Best Performers</a></li>
                                <li><a href="head-teacher.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Head Teacher</a></li>
                                <li><a href="student-papers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Papers</a></li>
                                <li><a href="employee-of-the-year.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Employee of the Year</a></li>
                                <li><a href="forum.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Forum</a></li>
                                <li><a href="developers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Developers</a></li>
                                <li><a href="student-projects.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Projects</a></li>
                            </ul>
                        </li>
                        <li><a href="contact.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="banner-bg h-96 flex items-center justify-center text-center banner-overlay" role="region" aria-label="Banner section with quote">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-white mb-4">"Stay informed, stay connected with Kageyo TVET School."</h2>
                <blockquote class="text-white">
                    <p>- Kageyo TVET School Administration</p>
                </blockquote>
            </div>
        </div>
    </header>

    <main role="main">
        <section class="py-12 bg-white" aria-label="Latest Announcements">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-blue-600 mb-8 text-center">Latest Announcements</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <article class="announcement-card bg-gray-50 p-6 rounded-lg shadow-lg" lang="rw">
                        <h3 class="text-xl font-bold text-blue-600 mb-2">Itangazo ry’Ubuzima</h3>
                        <p class="text-gray-700 mb-4">Ubuyobozi bwa Kageyo Technical Secondary School buramenyesha ababyeyi baharerera ko gusura abana bitemewe muri ibi bihe byo kwirinda COVID-19. Ibisabwa ni ugukomeza kwita ku buzima bw’abana.</p>
                        <p class="text-gray-500 text-sm mb-2"><i class="fas fa-user mr-1" aria-hidden="true"></i>Done by: Ayinkamiye Domitille</p>
                        <p class="text-gray-500 text-sm"><i class="fas fa-calendar mr-1" aria-hidden="true"></i>Posted: May 20, 2022</p>
                    </article>
                    <article class="announcement-card bg-gray-50 p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold text-blue-600 mb-2">New Academic Year Registration</h3>
                        <p class="text-gray-700 mb-4">Registration for the 2025-2026 academic year is now open for all trades, including Software Development and Accounting. Visit the <a href="student-papers.html" class="text-blue-600 hover:underline">Student Papers</a> page for requirements.</p>
                        <p class="text-gray-500 text-sm mb-2"><i class="fas fa-user mr-1" aria-hidden="true"></i>Done by: Administration</p>
                        <p class="text-gray-500 text-sm"><i class="fas fa-calendar mr-1" aria-hidden="true"></i>Posted: May 15, 2025</p>
                    </article>
                    <article class="announcement-card bg-gray-50 p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold text-blue-600 mb-2">Staff Recruitment Update</h3>
                        <p class="text-gray-700 mb-4">Kageyo TVET School is hiring trainers for Networking and Internet Technology. Interested applicants should apply via the <a href="apply job.html" class="text-blue-600 hover:underline">Apply for a Job</a> page by June 1, 2025.</p>
                        <p class="text-gray-500 text-sm mb-2"><i class="fas fa-user mr-1" aria-hidden="true"></i>Done by: HR Department</p>
                        <p class="text-gray-500 text-sm"><i class="fas fa-calendar mr-1" aria-hidden="true"></i>Posted: May 10, 2025</p>
                    </article>
                    <article class="announcement-card bg-gray-50 p-6 rounded-lg shadow-lg">
                        <h3 class="text-xl font-bold text-blue-600 mb-2">Upcoming Workshop</h3>
                        <p class="text-gray-700 mb-4">A career guidance workshop for Level 3 students will be held on June 15, 2025, at the school auditorium. Check the <a href="events.html" class="text-blue-600 hover:underline">Events</a> page for details.</p>
                        <p class="text-gray-500 text-sm mb-2"><i class="fas fa-user mr-1" aria-hidden="true"></i>Done by: Counseling Department</p>
                        <p class="text-gray-500 text-sm"><i class="fas fa-calendar mr-1" aria-hidden="true"></i>Posted: May 5, 2025</p>
                    </article>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-blue-900 text-white py-12" role="contentinfo">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h2><a href="index.html" class="text-2xl font-bold" aria-label="Kageyo TVET School Home">Kageyo TVET School</a></h2>
                    <p class="mt-2">Work - Courage - Solidarity</p>
                    <p class="mt-2">
                        Northern Province<br>
                        Gicumbi District<br>
                        Kaniga Sector
                    </p>
                </div>
                <div>
                    <h2 class="text-xl font-bold mb-4">Useful Links</h2>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="hover:underline" aria-label="Go to Home page">Home</a></li>
                        <li><a href="about.html" class="hover:underline" aria-label="Go to About Us page">About Us</a></li>
                        <li><a href="news.html" class="hover:underline" aria-label="Go to News page">News</a></li>
                        <li><a href="trades.html" class="hover:underline" aria-label="Go to Trades page">Trades</a></li>
                        <li><a href="contact.html" class="hover:underline" aria-label="Go to Contact page">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h2 class="text-xl font-bold mb-4">Information</h2>
                    <ul class="space-y-2">
                        <li><a href="developers.html" class="hover:underline" aria-label="Go to Developers page">Developers</a></li>
                        <li><a href="student-projects.html" class="hover:underline" aria-label="Go to Student Projects page">Student Projects</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p>© Kageyo TVET School 2025</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <section id="scroll-top" class="fixed bottom-4 right-4 hidden">
        <button class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Scroll to top of page">
            <i class="fas fa-arrow-up" aria-hidden="true"></i>
        </button>
    </section>

    <!-- Chatbot Button and Window -->
    <section id="chatbot" class="fixed bottom-4 right-16">
        <button id="chatbot-toggle" class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Toggle chat window" aria-expanded="false" aria-controls="chatbot-window">
            <i class="fas fa-comment-dots" aria-hidden="true"></i>
            <span class="sr-only">Open chat</span>
        </button>
        <div id="chatbot-window" role="dialog" aria-label="Chat with Kageyo TVET School assistant">
            <div id="chatbot-header">
                <span>Kageyo TVET Assistant</span>
                <button id="chatbot-close" class="text-white hover:text-gray-200" aria-label="Close chat window">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div id="chatbot-messages" aria-live="polite">
                <div class="chatbot-bot-message">Welcome! I'm here to help you learn about Kageyo TVET School. Ask me anything, like "What are the latest announcements?" or say "go to news" to navigate. Type 'help' for navigation options.</div>
            </div>
            <div class="p-2">
                <input id="chatbot-input" type="text" placeholder="Ask a question or type 'go to [page]'..." aria-label="Type your question or navigation command">
                <button id="chatbot-send" class="bg-blue-600 text-white px-4 py-2 mt-2 rounded hover:bg-blue-700" aria-label="Send message">Send</button>
            </div>
        </div>
    </section>

    <div id="loader" class="text-center" aria-live="polite">Loading site</div>

    <script>
        function myFunction() {
            setTimeout(showPage, 3000);
        }

        function showPage() {
            document.getElementById("loader").style.display = "none";
            document.getElementById("scroll-top").style.display = "block";
        }

        function toggleNav() {
            const nav = document.getElementById("navbar");
            const button = document.querySelector("button[aria-controls='navbar']");
            const isExpanded = nav.classList.toggle("hidden");
            button.setAttribute("aria-expanded", !isExpanded);
        }

        function toggleDropdown(menuId) {
            const menu = document.getElementById(menuId);
            const button = document.querySelector(`button[aria-controls="${menuId}"]`);
            const isExpanded = menu.classList.toggle("active");
            button.setAttribute("aria-expanded", isExpanded);
        }

        // Dropdown stabilization
        document.querySelectorAll('.dropdown').forEach(dropdown => {
            const button = dropdown.querySelector('button');
            const menu = dropdown.querySelector('.dropdown-menu');
            let timeout;

            // Mobile click toggle
            dropdown.addEventListener('click', (e) => {
                if (window.innerWidth <= 768) {
                    e.preventDefault();
                    toggleDropdown(menu.id);
                }
            });

            // Desktop hover with delay
            if (window.innerWidth > 768) {
                dropdown.addEventListener('mouseenter', () => {
                    clearTimeout(timeout);
                    menu.classList.add('active');
                    button.setAttribute('aria-expanded', 'true');
                });

                dropdown.addEventListener('mouseleave', () => {
                    timeout = setTimeout(() => {
                        menu.classList.remove('active');
                        button.setAttribute('aria-expanded', 'false');
                    }, 200);
                });

                // Keep menu open when hovering over it
                menu.addEventListener('mouseenter', () => {
                    clearTimeout(timeout);
                });

                menu.addEventListener('mouseleave', () => {
                    timeout = setTimeout(() => {
                        menu.classList.remove('active');
                        button.setAttribute('aria-expanded', 'false');
                    }, 200);
                });
            }

            // Keyboard accessibility for dropdowns
            button.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDropdown(menu.id);
                }
            });
        });

        // Scroll to top
        document.querySelector('#scroll-top button').addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Navigation map for chatbot
        const navigationMap = {
            'home': { url: 'index.html', name: 'Home' },
            'about': { url: 'about.html', name: 'About Us' },
            'about us': { url: 'about.html', name: 'About Us' },
            'apply': { url: 'apply job.html', name: 'Apply for a Job' },
            'apply for a job': { url: 'apply job.html', name: 'Apply for a Job' },
            'job': { url: 'apply job.html', name: 'Apply for a Job' },
            'administration': { url: 'staff.html', name: 'Staff' },
            'staff': { url: 'staff.html', name: 'Staff' },
            'trainers': { url: 'trainers.html', name: 'Trainers' },
            'trades': { url: 'trades.html', name: 'Trades' },
            'news': { url: 'news.html', name: 'News' },
            'events': { url: 'events.html', name: 'Events' },
            'announcements': { url: 'announcements.html', name: 'Announcements' },
            'best performers': { url: 'best-performers.html', name: 'Best Performers' },
            'head teacher': { url: 'head-teacher.html', name: 'Head Teacher' },
            'student papers': { url: 'student-papers.html', name: 'Student Papers' },
            'employee of the year': { url: 'employee-of-the-year.html', name: 'Employee of the Year' },
            'forum': { url: 'forum.html', name: 'Forum' },
            'developers': { url: 'developers.html', name: 'Developers' },
            'student projects': { url: 'student-projects.html', name: 'Student Projects' },
            'contact': { url: 'contact.html', name: 'Contact' }
        };

        // Help message for navigation options
        const helpMessage = `I can help you navigate the Kageyo TVET School website. Say "go to [page]" to visit one of these pages:
- Home
- About Us
- Apply for a Job
- Staff (Administration)
- Trainers
- Trades
- News
- Events
- Announcements
- Best Performers
- Head Teacher
- Student Papers
- Employee of the Year
- Forum
- Developers
- Student Projects
- Contact
For example, type "go to news". You can also ask questions like "What are the latest announcements?" or "Who is the head teacher?"`;

        // Function to handle navigation
        function handleNavigation(message) {
            const lowerMessage = message.toLowerCase().trim();
            if (lowerMessage.startsWith('go to ') || lowerMessage.startsWith('navigate to ') || lowerMessage.startsWith('take me to ')) {
                const pageQuery = lowerMessage.replace(/^(go to |navigate to |take me to )/i, '');
                for (const [key, page] of Object.entries(navigationMap)) {
                    if (pageQuery.includes(key)) {
                        return { action: 'navigate', url: page.url, name: page.name };
                    }
                }
                return { action: 'error', message: `Sorry, I couldn't find that page. Type 'help' to see available pages.` };
            } else if (lowerMessage === 'help') {
                return { action: 'help', message: helpMessage };
            }
            return null;
        }

        // Function to send message to Grok 3 via xAI API
        async function sendMessageToGrok(message) {
            const apiUrl = 'https://api.x.ai/v1/grok';
            const apiKey = 'YOUR_XAI_API_KEY'; // Securely store in production

            const websiteContext = `
Kageyo TVET School is a public technical school in Gicumbi District, Kaniga Sector, Northern Province, Rwanda, near Kageyo tea factory. The head teacher is Ayinkamiye Domitille (phone: 0788521465), who has managed the school since 2014. The school offers trades including Software Development, Networking and Internet Technology, Computer System and Architecture, and Accounting. Its vision is to be a center of excellence in developing human resources, with a mission to provide competence-based training for national and international development. Core values include Customer Care, Result-based Performance, Professionalism, Integrity, Transparency, and Accountability.

Website pages and content:
- Home (index.html): Overview, vision, mission, core values, goals (e.g., develop professional skills, provide career guidance).
- About Us (about.html): School history and objectives.
- Apply for a Job (apply job.html): Job application information, including recruitment for trainers (e.g., Networking and Internet Technology, deadline June 1, 2025).
- Staff (staff.html): Administration and staff details.
- Trainers (trainers.html): Information about trainers.
- Trades (trades.html): Details on offered trades (e.g., Software Development, Accounting).
- News (news.html): Latest news, e.g., "Kageyo TVET 25th Anniversary Celebration" (posted May 20, 2025).
- Events (events.html): Upcoming events, e.g., Athletism Competition at Gicumbi Stadium on May 29, 2022, at 10:32, and a career guidance workshop on June 15, 2025.
- Announcements (announcements.html): Announcements, e.g., COVID-19 visitor restrictions by Ayinkamiye Domitille (posted May 20, 2022), new academic year registration for 2025-2026 (posted May 15, 2025), staff recruitment for trainers (posted May 10, 2025), and a career guidance workshop (posted May 5, 2025).
- Best Performers (best-performers.html): National Examination top performers, e.g., Nyandwi Emmanuel (Score: 60, Accounting & Finance), Shyaka Clever Prince (Score: 59, Software Development).
- Head Teacher (head-teacher.html): Details about Ayinkamiye Domitille, Business Department.
- Student Papers (student-papers.html): Requirements for new students in Level 3 trades (e.g., Software Development, posted 2 years ago).
- Employee of the Year (employee-of-the-year.html): Ntwali Remy, Website Development Trainer, best employee for 2023-2024.
- Forum (forum.html): Community discussion platform.
- Developers (developers.html): Information about website developers.
- Student Projects (student-projects.html): Showcase of student projects.
- Contact (contact.html): Contact information for the school.

The school emphasizes work, courage, and solidarity, aiming to develop skills like communication, teamwork, and problem-solving, and to offer continuous learning opportunities.`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                    },
                    body: JSON.stringify({
                        prompt: `You are Grok 3, created by xAI, acting as a conversational assistant for Kageyo TVET School's website. Use the provided context to answer questions accurately and concisely about the school, its trades, staff, events, announcements, or other content. Suggest relevant website pages with HTML links (e.g., <a href="trades.html" class="chatbot-link">Trades</a>) when appropriate. For navigation requests, do not respond as they are handled separately. If the query is unclear or outside the context, suggest contacting the school at 0788521465. Keep responses conversational and user-friendly.

Context: ${websiteContext}

User question: ${message}`,
                        max_tokens: 250,
                        model: 'grok-3'
                    }),
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const data = await response.json();
                return data.choices[0].text.trim();
            } catch (error) {
                console.error('Error communicating with Grok API:', error);
                return 'Sorry, I encountered an issue. Please try again or contact Kageyo TVET School at 0788521465.';
            }
        }

        // Chatbot functionality
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const chatbotClose = document.getElementById('chatbot-close');
        const chatbotSend = document.getElementById('chatbot-send');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotMessages = document.getElementById('chatbot-messages');

        function toggleChatbot() {
            const isExpanded = chatbotWindow.classList.toggle('active');
            chatbotToggle.setAttribute('aria-expanded', isExpanded);
            if (isExpanded) {
                chatbotInput.focus();
            } else {
                chatbotToggle.focus();
            }
        }

        chatbotToggle.addEventListener('click', toggleChatbot);
        chatbotClose.addEventListener('click', toggleChatbot);

        chatbotToggle.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleChatbot();
            }
        });

        chatbotClose.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleChatbot();
            }
        });

        // Trap focus within chatbot window
        chatbotWindow.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                const focusableElements = chatbotWindow.querySelectorAll('button, input');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                if (e.shiftKey && document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                } else if (!e.shiftKey && document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            } else if (e.key === 'Escape') {
                toggleChatbot();
            }
        });

        // Chatbot message handling
        chatbotSend.addEventListener('click', async () => {
            const message = chatbotInput.value.trim();
            if (message) {
                // Display user message
                const userMessage = document.createElement('div');
                userMessage.className = 'chatbot-user-message';
                userMessage.innerHTML = `<strong>You:</strong> ${message}`;
                chatbotMessages.appendChild(userMessage);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                chatbotInput.value = '';

                // Show loading message
                const loadingMessage = document.createElement('div');
                loadingMessage.className = 'chatbot-bot-message';
                loadingMessage.innerHTML = '<strong>Grok:</strong> Thinking...';
                chatbotMessages.appendChild(loadingMessage);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                // Check for navigation command
                const navResult = handleNavigation(message);
                if (navResult) {
                    loadingMessage.remove();
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chatbot-bot-message';
                    if (navResult.action === 'navigate') {
                        botMessage.innerHTML = `<strong>Grok:</strong> Taking you to the <a href="${navResult.url}" class="chatbot-link">${navResult.name}</a> page...`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                        setTimeout(() => {
                            window.location.href = navResult.url;
                        }, 1000);
                    } else if (navResult.action === 'help') {
                        botMessage.innerHTML = `<strong>Grok:</strong> ${navResult.message}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    } else {
                        botMessage.innerHTML = `<strong>Grok:</strong> ${navResult.message}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    }
                } else {
                    // Get Grok response for informational queries
                    const botResponse = await sendMessageToGrok(message);
                    loadingMessage.remove();
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chatbot-bot-message';
                    botMessage.innerHTML = `<strong>Grok:</strong> ${botResponse}`;
                    chatbotMessages.appendChild(botMessage);
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                }
            }
        });

        chatbotInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                chatbotSend.click();
            }
        });
    </script>
</body>
</html>