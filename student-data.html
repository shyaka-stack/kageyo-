<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Data</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link rel="icon" type="image/png" href="menu-icon.png">
  <script src="https://kit.fontawesome.com/yourkit.js" crossorigin="anonymous"></script>
  <style>
    body { font-family: 'Roboto', Arial, sans-serif; }
    .icon-btn { transition: box-shadow 0.2s; }
    .icon-btn:active { box-shadow: 0 0 0 2px #2563eb; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <header class="bg-white shadow flex items-center justify-between px-4 py-3">
    <h1 class="text-2xl font-bold text-blue-600">Student Data</h1>
    <button id="menuBtn" class="icon-btn" aria-label="Menu">
      <img src="menu-icon.png" alt="Menu Icon" style="width:32px;height:32px;object-fit:contain;" />
    </button>
  </header>
  <main class="container mx-auto px-4 py-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
      <input id="searchBar" type="text" placeholder="Search students..." class="border rounded px-4 py-2 w-full md:w-1/3 mb-4 md:mb-0" />
      <button id="addStudentBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center"><i class="fas fa-user-plus mr-2"></i>Add Student</button>
    </div>
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white rounded-lg shadow">
        <thead>
          <tr class="bg-blue-600 text-white">
            <th class="py-2 px-4">Photo</th>
            <th class="py-2 px-4">Name</th>
            <th class="py-2 px-4">Class</th>
            <th class="py-2 px-4">Age</th>
            <th class="py-2 px-4">Attendance</th>
            <th class="py-2 px-4">Actions</th>
          </tr>
        </thead>
        <tbody id="studentTable"></tbody>
      </table>
    </div>
  </main>
  <!-- Add/Edit Student Modal -->
  <div id="studentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative">
      <button id="closeModalBtn" class="absolute top-2 right-2 text-gray-500 hover:text-red-600 text-xl">&times;</button>
      <h2 id="modalTitle" class="text-xl font-bold mb-4">Add Student</h2>
      <form id="studentForm" class="space-y-4">
        <input type="hidden" id="studentIdx" />
        <div>
          <label class="block mb-1 font-semibold">Name</label>
          <input type="text" id="studentName" class="border rounded px-3 py-2 w-full" required />
        </div>
        <div>
          <label class="block mb-1 font-semibold">Class</label>
          <input type="text" id="studentClass" class="border rounded px-3 py-2 w-full" required />
        </div>
        <div>
          <label class="block mb-1 font-semibold">Age</label>
          <input type="number" id="studentAge" class="border rounded px-3 py-2 w-full" required min="1" />
        </div>
        <div>
          <label class="block mb-1 font-semibold">Photo URL</label>
          <input type="url" id="studentPhoto" class="border rounded px-3 py-2 w-full" placeholder="https://..." />
        </div>
        <div>
          <label class="block mb-1 font-semibold">Attendance</label>
          <select id="studentAttendance" class="border rounded px-3 py-2 w-full">
            <option value="">-</option>
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
          </select>
        </div>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Save</button>
      </form>
    </div>
  </div>
  <script>
    // Student Data Logic
    let students = JSON.parse(localStorage.getItem('students') || '[]');
    const studentTable = document.getElementById('studentTable');
    const searchBar = document.getElementById('searchBar');
    const addStudentBtn = document.getElementById('addStudentBtn');
    const studentModal = document.getElementById('studentModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const studentForm = document.getElementById('studentForm');
    const modalTitle = document.getElementById('modalTitle');
    const studentIdx = document.getElementById('studentIdx');
    const studentName = document.getElementById('studentName');
    const studentClass = document.getElementById('studentClass');
    const studentAge = document.getElementById('studentAge');
    const studentPhoto = document.getElementById('studentPhoto');
    const studentAttendance = document.getElementById('studentAttendance');

    function renderStudents(filter = '') {
      studentTable.innerHTML = '';
      students.filter(s => s.name.toLowerCase().includes(filter.toLowerCase())).forEach((student, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="py-2 px-4"><img src="${student.photo || 'https://via.placeholder.com/60?text=Photo'}" alt="${student.name} photo" class="w-14 h-14 object-cover rounded-full border" /></td>
          <td class="py-2 px-4">${student.name}</td>
          <td class="py-2 px-4">${student.class}</td>
          <td class="py-2 px-4">${student.age}</td>
          <td class="py-2 px-4">${student.attendance || '-'}</td>
          <td class="py-2 px-4">
            <button onclick="editStudent(${idx})" class="bg-yellow-500 text-white px-2 py-1 rounded mr-2">Edit</button>
            <button onclick="deleteStudent(${idx})" class="bg-red-600 text-white px-2 py-1 rounded">Delete</button>
          </td>
        `;
        studentTable.appendChild(tr);
      });
    }

    function saveStudents() {
      localStorage.setItem('students', JSON.stringify(students));
      renderStudents(searchBar.value);
    }

    addStudentBtn.onclick = function() {
      modalTitle.textContent = 'Add Student';
      studentIdx.value = '';
      studentName.value = '';
      studentClass.value = '';
      studentAge.value = '';
      studentPhoto.value = '';
      studentAttendance.value = '';
      studentModal.classList.remove('hidden');
    };

    closeModalBtn.onclick = function() {
      studentModal.classList.add('hidden');
    };

    studentForm.onsubmit = function(e) {
      e.preventDefault();
      const idx = studentIdx.value;
      const newStudent = {
        name: studentName.value,
        class: studentClass.value,
        age: studentAge.value,
        photo: studentPhoto.value,
        attendance: studentAttendance.value
      };
      if (idx === '') {
        students.push(newStudent);
      } else {
        students[idx] = newStudent;
      }
      saveStudents();
      studentModal.classList.add('hidden');
    };

    window.editStudent = function(idx) {
      modalTitle.textContent = 'Edit Student';
      studentIdx.value = idx;
      const s = students[idx];
      studentName.value = s.name;
      studentClass.value = s.class;
      studentAge.value = s.age;
      studentPhoto.value = s.photo;
      studentAttendance.value = s.attendance;
      studentModal.classList.remove('hidden');
    };

    window.deleteStudent = function(idx) {
      if (confirm('Delete this student?')) {
        students.splice(idx, 1);
        saveStudents();
      }
    };

    searchBar.oninput = function() {
      renderStudents(searchBar.value);
    };

    // Initial render
    renderStudents();
  </script>
</body>
</html>
