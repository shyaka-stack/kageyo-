<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Watch YouTube Shorts from Kageyo TVET School, featuring tutorials and updates from Gicumbi district, Kaniga sector.">
    <meta name="author" content="jobeuse| yobu| job| iradukunda">
    <title>Kageyo TVET School | YouTube Short</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="images/LOGO-KAGEYO-TVET.png" rel="icon">
    <style>
        .dropdown-menu {
            display: none;
            transition: all 0.3s ease-in-out;
            z-index: 1000;
        }
        .dropdown-menu.active {
            display: block;
        }
        @media (min-width: 769px) {
            .dropdown-menu {
                position: absolute;
                background-color: #ffffff;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                border-radius: 0.375rem;
                min-width: 12rem;
                top: 100%;
                left: 0;
            }
        }
        @media (max-width: 768px) {
            #loader {
                position: absolute;
                left: 50%;
                top: 50%;
                z-index: 1;
                transform: translate(-50%, -50%);
            }
            .dropdown-menu {
                position: static;
                box-shadow: none;
                background-color: #f3f4f6;
                width: 100%;
                display: none;
            }
            .dropdown-menu.active {
                display: block;
            }
        }
        :focus {
            outline: 3px solid #1D4ED8;
            outline-offset: 2px;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        #chatbot-window {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 360px;
            max-height: 480px;
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            overflow: hidden;
        }
        #chatbot-window.active {
            display: block;
        }
        #chatbot-messages {
            height: 360px;
            overflow-y: auto;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }
        #chatbot-input {
            width: 100%;
            padding: 0.75rem;
            border: none;
            outline: none;
            font-size: 1rem;
        }
        #chatbot-input:focus {
            outline: 2px solid #1D4ED8;
        }
        #chatbot-header {
            background-color: #1D4ED8;
            color: white;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chatbot-user-message {
            background-color: #e3f2fd;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
            align-self: flex-end;
        }
        .chatbot-bot-message {
            background-color: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
        }
        .chatbot-link {
            color: #1D4ED8;
            text-decoration: underline;
        }
        .iframe-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }
        .iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 1s ease-in;
        }
    </style>
</head>
<body class="bg-gray-100 font-roboto" onload="myFunction()">
    <header class="bg-white shadow" role="banner">
        <div class="bg-blue-600 text-white py-2">
            <div class="container mx-auto px-4 flex justify-end">
                <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" target="_blank" class="hover:underline" aria-label="Join Kageyo TVET School WhatsApp Group">
                    <i class="fab fa-whatsapp mr-2" aria-hidden="true"></i>Join WhatsApp Group
                </a>
            </div>
        </div>
        <div class="container mx-auto px-4 py-4">
            <nav class="flex flex-wrap items-center justify-between" role="navigation" aria-label="Main navigation">
                <div class="flex items-center space-x-4">
                    <a href="index.html" aria-label="Kageyo TVET School Home">
                        <img src="logo.jpg" alt="Kageyo TVET School Logo" class="w-20 h-20">
                    </a>
                    <div>
                        <h1>
                            <a href="index.html" class="text-2xl font-bold text-blue-600">KAGEYO TVET SCHOOL</a>
                        </h1>
                        <p class="text-sm text-gray-500">WORK - COURAGE - SOLIDARITY</p>
                    </div>
                </div>
                <button class="md:hidden text-blue-600" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="navbar" onclick="toggleNav()">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                    <span class="sr-only">Toggle menu</span>
                </button>
                <div id="navbar" class="hidden md:flex md:items-center w-full md:w-auto mt-4 md:mt-0" role="menu">
                    <ul class="flex flex-col md:flex-row md:space-x-6 w-full md:w-auto">
                        <li><a href="index.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Home</a></li>
                        <li><a href="about.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">About Us</a></li>
                        <li><a href="apply job.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Apply for a Job</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="admin-menu" onclick="toggleDropdown('admin-menu')" role="menuitem">
                                Administration <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle Administration submenu</span>
                            </button>
                            <ul id="admin-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48" role="menu">
                                <li><a href="staff.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Staff</a></li>
                            </ul>
                        </li>
                        <li><a href="trainers.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trainers</a></li>
                        <li><a href="trades.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trades</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="more-menu" onclick="toggleDropdown('more-menu')" role="menuitem">
                                More <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle More submenu</span>
                            </button>
                            <ul id="more-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48" role="menu">
                                <li><a href="news.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">News</a></li>
                                <li><a href="events.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Events</a></li>
                                <li><a href="announcements.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Announcements</a></li>
                                <li><a href="best-performers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Best Performers</a></li>
                                <li><a href="head-teacher.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Head Teacher</a></li>
                                <li><a href="student-papers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Papers</a></li>
                                <li><a href="employee-of-the-year.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Employee of the Year</a></li>
                                <li><a href="forum.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Forum</a></li>
                                <li><a href="developers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Developers</a></li>
                                <li><a href="student-projects.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Projects</a></li>
                            </ul>
                        </li>
                        <li><a href="contact.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <!-- Promotional Banner -->
    <section class="bg-blue-600 text-white py-8 fade-in" aria-label="Promotional banner">
        <div class="container mx-auto px-4 max-w-7xl text-center">
            <h2 class="text-2xl font-bold mb-4">Explore Our Trades!</h2>
            <p class="mb-4">Discover programs like Software Development, Accounting, and more. Join Kageyo TVET School today!</p>
            <a href="trades.html" class="inline-block bg-white text-blue-600 font-bold py-2 px-4 rounded hover:bg-gray-100" aria-label="Learn more about our trades">Learn More</a>
        </div>
    </section>

    <main role="main">
        <section class="py-16 bg-white" aria-label="YouTube Short">
            <div class="container mx-auto max-w-7xl px-4">
                <div class="mb-12">
                    <h1 class="text-3xl font-bold text-blue-600 mb-2" id="short-title">YouTube Short</h1>
                    <div class="flex space-x-2 text-sm text-gray-600">
                        <a href="index.html" class="hover:text-blue-600" aria-label="Go to Home page">Home</a>
                        <span>/</span>
                        <a href="news.html" class="hover:text-blue-600" aria-label="Go to News page">News</a>
                        <span>/</span>
                        <span id="short-breadcrumb" aria-current="page">Short</span>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                    <div class="lg:col-span-2">
                        <div class="bg-white shadow rounded-lg overflow-hidden">
                            <div class="p-6">
                                <div class="iframe-container">
                                    <iframe id="short-video" src="https://www.youtube.com/embed/placeholder" title="YouTube Short" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            <div class="p-6">
                                <p class="text-sm text-gray-500" id="short-date">Posted: May 2025</p>
                                <h2 class="text-2xl font-bold text-blue-600 mb-4" id="short-heading">Short Title</h2>
                                <div id="short-content" class="text-gray-600 mb-4">
                                    <p>This is a placeholder for the YouTube Short content. Below are sample contents based on the short ID.</p>
                                    <!-- Sample Content for Coding Basics -->
                                    <div id="software-short-2025" class="hidden">
                                        <h3>Coding Basics in Kinyarwanda</h3>
                                        <p>This YouTube Short, posted on May 20, 2025, introduces coding basics in Kinyarwanda, perfect for beginners. Learn variables, loops, and functions with trainer Jean de Dieu Nsengiyumva.</p>
                                        <p>Explore more on <a href="trades.html" class="text-blue-600 hover:underline">Trades</a> or join our <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="text-blue-600 hover:underline">WhatsApp group</a> for updates.</p>
                                    </div>
                                    <!-- Sample Content for Router Setup -->
                                    <div id="networking-short-2025" class="hidden">
                                        <h3>Router Setup Guide</h3>
                                        <p>Posted on May 20, 2025, this Short shows how to set up a router for secure networking, led by Networking trainer Marie Uwase. Ideal for IT students.</p>
                                        <p>Learn about our Networking trade on <a href="trades.html" class="text-blue-600 hover:underline">Trades</a> or call 0788521465 for details.</p>
                                    </div>
                                    <!-- Sample Content for Welding Safety -->
                                    <div id="welding-short-2025" class="hidden">
                                        <h3>Welding Safety Tips</h3>
                                        <p>This YouTube Short, posted on May 20, 2025, covers essential welding safety practices, taught by trainer Paul Niyigena. Perfect for our new Welding students.</p>
                                        <p>Discover the Welding trade on <a href="trades.html" class="text-blue-600 hover:underline">Trades</a> or join our <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="text-blue-600 hover:underline">WhatsApp group</a>.</p>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <p class="text-sm text-gray-500" id="short-author">By: Kageyo TVET School</p>
                                    <a href="news.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center" aria-label="Back to News page">
                                        Back to News <i class="fas fa-arrow-left ml-2" aria-hidden="true"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-1">
                        <div class="bg-gray-50 p-6 rounded-lg shadow">
                            <h3 class="text-xl font-bold text-blue-600 mb-4">Recent Shorts</h3>
                            <div class="flex space-x-4 mb-4">
                                <img src="sod.jpg" alt="Coding Basics in Kinyarwanda" class="w-24 h-24 object-cover rounded">
                                <div>
                                    <a href="readshorts.html?id=software-short-2025" class="text-blue-600 hover:underline" aria-label="Watch Coding Basics in Kinyarwanda">Coding Basics in Kinyarwanda</a>
                                    <p class="text-sm text-gray-500 mt-1">May 20, 2025</p>
                                </div>
                            </div>
                            <div class="flex space-x-4 mb-4">
                                <img src="nit.jpg" alt="Router Setup Guide" class="w-24 h-24 object-cover rounded">
                                <div>
                                    <a href="readshorts.html?id=networking-short-2025" class="text-blue-600 hover:underline" aria-label="Watch Router Setup Guide">Router Setup Guide</a>
                                    <p class="text-sm text-gray-500 mt-1">May 20, 2025</p>
                                </div>
                            </div>
                            <div class="flex space-x-4 mb-4">
                                <img src="csa.jpg" alt="Welding Safety Tips" class="w-24 h-24 object-cover rounded">
                                <div>
                                    <a href="readshorts.html?id=welding-short-2025" class="text-blue-600 hover:underline" aria-label="Watch Welding Safety Tips">Welding Safety Tips</a>
                                    <p class="text-sm text-gray-500 mt-1">May 20, 2025</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-blue-900 text-white py-12" role="contentinfo">
        <div class="container mx-auto max-w-7xl px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h2><a href="index.html" class="text-2xl font-bold" aria-label="Kageyo TVET School Home">Kageyo TVET School</a></h2>
                    <p class="mt-2">Work - Courage - Solidarity</p>
                    <p class="mt-2">
                        Northern Province<br>
                        Gicumbi District<br>
                        Kaniga Sector
                    </p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Useful Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="hover:underline" aria-label="Go to Home page">Home</a></li>
                        <li><a href="about.html" class="hover:underline" aria-label="Go to About Us page">About Us</a></li>
                        <li><a href="news.html" class="hover:underline" aria-label="Go to News page">News</a></li>
                        <li><a href="trades.html" class="hover:underline" aria-label="Go to Trades page">Trades</a></li>
                        <li><a href="contact.html" class="hover:underline" aria-label="Go to Contact page">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Information</h3>
                    <ul class="space-y-2">
                        <li><a href="developers.html" class="hover:underline" aria-label="Go to Developers page">Developers</a></li>
                        <li><a href="student-projects.html" class="hover:underline" aria-label="Go to Student Projects page">Student Projects</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p>© Kageyo TVET School 2025</p>
            </div>
        </div>
    </footer>

    <section id="scroll-top" class="fixed bottom-4 right-4 hidden" aria-label="Scroll to top">
        <button class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Scroll to top of page">
            <i class="fas fa-arrow-up" aria-hidden="true"></i>
        </button>
    </section>

    <section id="chatbot" class="fixed bottom-4 right-16" aria-label="Chatbot">
        <button id="chatbot-toggle" class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Toggle chat window" aria-expanded="false" aria-controls="chatbot-window">
            <i class="fas fa-comment-dots" aria-hidden="true"></i>
            <span class="sr-only">Open chat</span>
        </button>
        <div id="chatbot-window" role="dialog" aria-label="Chat with Kageyo TVET School assistant">
            <div id="chatbot-header">
                <span>Kageyo TVET Assistant</span>
                <button id="chatbot-close" class="text-white hover:text-gray-200" aria-label="Close chat window">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div id="chatbot-messages" aria-live="polite">
                <div class="chatbot-bot-message">Hi! I’m excited to share our YouTube Shorts, like Coding Basics or Welding Safety! Ask about Shorts, trades, or anything else, and I’ll help with enthusiasm!</div>
            </div>
            <div class="p-2">
                <input id="chatbot-input" type="text" placeholder="Ask about our Shorts or school updates!" aria-label="Type your question or concern">
                <button id="chatbot-send" class="bg-blue-600 text-white px-4 py-2 mt-2 rounded hover:bg-blue-700" aria-label="Send message">Send</button>
            </div>
        </div>
    </section>

    <div id="loader" class="text-center" aria-live="polite">Loading site</div>

    <script>
        function myFunction() {
            setTimeout(showPage, 3000);
        }

        function showPage() {
            document.getElementById("loader").style.display = "none";
            document.getElementById("scroll-top").style.display = "block";
        }

        function toggleNav() {
            const nav = document.getElementById("navbar");
            const button = document.querySelector("button[aria-controls='navbar']");
            const isExpanded = nav.classList.toggle("hidden");
            button.setAttribute("aria-expanded", !isExpanded);
        }

        function toggleDropdown(menuId) {
            const menu = document.getElementById(menuId);
            const button = document.querySelector(`button[aria-controls="${menuId}"]`);
            const isExpanded = menu.classList.toggle("active");
            button.setAttribute("aria-expanded", isExpanded);
        }

        document.querySelectorAll('.dropdown').forEach(dropdown => {
            const button = dropdown.querySelector('button');
            const menu = dropdown.querySelector('.dropdown-menu');
            let timeout;

            dropdown.addEventListener('click', (e) => {
                if (window.innerWidth <= 768) {
                    e.preventDefault();
                    toggleDropdown(menu.id);
                }
            });

            if (window.innerWidth > 768) {
                dropdown.addEventListener('mouseenter', () => {
                    clearTimeout(timeout);
                    menu.classList.add('active');
                    button.setAttribute('aria-expanded', 'true');
                });

                dropdown.addEventListener('mouseleave', () => {
                    timeout = setTimeout(() => {
                        menu.classList.remove('active');
                        button.setAttribute('aria-expanded', 'false');
                    }, 200);
                });

                menu.addEventListener('mouseenter', () => {
                    clearTimeout(timeout);
                });

                menu.addEventListener('mouseleave', () => {
                    timeout = setTimeout(() => {
                        menu.classList.remove('active');
                        button.setAttribute('aria-expanded', 'false');
                    }, 200);
                });
            }

            button.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDropdown(menu.id);
                }
            });
        });

        document.querySelector('#scroll-top button').addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Dynamic Content Loading for YouTube Shorts
        const shortsData = {
            'software-short-2025': {
                title: 'Coding Basics in Kinyarwanda',
                heading: 'Coding Basics in Kinyarwanda',
                date: 'Posted: May 20, 2025',
                author: 'By: Kageyo TVET School',
                videoSrc: 'https://youtu.be/V4Xn23jeLiE', // Replace with actual YouTube video ID
                breadcrumb: 'Coding Basics'
            },
            'networking-short-2025': {
                title: 'Router Setup Guide',
                heading: 'Router Setup Guide',
                date: 'Posted: May 20, 2025',
                author: 'By: Kageyo TVET School',
                videoSrc: 'https://youtu.be/V4Xn23jeLiE', // Replace with actual YouTube video ID
                breadcrumb: 'Router Setup'
            },
            'welding-short-2025': {
                title: 'Welding Safety Tips',
                heading: 'Welding Safety Tips',
                date: 'Posted: May 20, 2025',
                author: 'By: Kageyo TVET School',
                videoSrc: 'https://www.youtube.com/embed/placeholder_welding', // Replace with actual YouTube video ID
                breadcrumb: 'Welding Safety'
            }
        };

        function loadShortContent() {
            const urlParams = new URLSearchParams(window.location.search);
            const shortId = urlParams.get('id');
            const shortContent = shortsData[shortId];

            if (shortContent) {
                document.getElementById('short-title').textContent = shortContent.title;
                document.getElementById('short-heading').textContent = shortContent.heading;
                document.getElementById('short-date').textContent = shortContent.date;
                document.getElementById('short-author').textContent = shortContent.author;
                document.getElementById('short-video').src = shortContent.videoSrc;
                document.getElementById('short-video').title = shortContent.title;
                document.getElementById('short-breadcrumb').textContent = shortContent.breadcrumb;

                const contentDiv = document.getElementById('short-content');
                const targetContent = document.getElementById(shortId);
                contentDiv.innerHTML = targetContent.innerHTML;
            } else {
                document.getElementById('short-content').innerHTML = `
                    <p>Sorry, this YouTube Short could not be found. Please check out our <a href="news.html" class="text-blue-600 hover:underline">News</a> page for more updates!</p>
                `;
                document.getElementById('short-title').textContent = 'Short Not Found';
                document.getElementById('short-heading').textContent = 'Short Not Found';
                document.getElementById('short-breadcrumb').textContent = 'Not Found';
            }
        }

        window.addEventListener('load', loadShortContent);

        const navigationMap = {
            'home': { url: 'index.html', name: 'Home' },
            'about': { url: 'about.html', name: 'About Us' },
            'about us': { url: 'about.html', name: 'About Us' },
            'apply': { url: 'apply job.html', name: 'Apply for a Job' },
            'apply for a job': { url: 'apply job.html', name: 'Apply for a Job' },
            'job': { url: 'apply job.html', name: 'Apply for a Job' },
            'administration': { url: 'staff.html', name: 'Staff' },
            'staff': { url: 'staff.html', name: 'Staff' },
            'trainers': { url: 'trainers.html', name: 'Trainers' },
            'trades': { url: 'trades.html', name: 'Trades' },
            'news': { url: 'news.html', name: 'News' },
            'events': { url: 'events.html', name: 'Events' },
            'announcements': { url: 'announcements.html', name: 'Announcements' },
            'best performers': { url: 'best-performers.html', name: 'Best Performers' },
            'head teacher': { url: 'head-teacher.html', name: 'Head Teacher' },
            'student papers': { url: 'student-papers.html', name: 'Student Papers' },
            'employee of the year': { url: 'employee-of-the-year.html', name: 'Employee of the Year' },
            'forum': { url: 'forum.html', name: 'Forum' },
            'developers': { url: 'developers.html', name: 'Developers' },
            'student projects': { url: 'student-projects.html', name: 'Student Projects' },
            'contact': { url: 'contact.html', name: 'Contact' }
        };

        const helpMessage = `I’m thrilled to assist you with Kageyo TVET School! I can solve problems like:
- Job applications and salary info
- School fees and payment plans
- Choosing a trade
- Career planning
- Student registration
- Parent questions (e.g., student progress)
- Accommodation options
- Extracurricular activities
- Latest news and YouTube Shorts (e.g., Coding Basics)
Or navigate to pages by saying "go to [page]" (e.g., Home, Trades, Contact). Try "go to news" or tell me what’s on your mind—like "What’s the salary for trainers?" or "Tell me about the welding Short!" I’m here to help with a smile!`;

        function detectProblem(message) {
            const lowerMessage = message.toLowerCase().trim();
            const emotionalPrefixes = [
                'I’m thrilled to help!',
                'Let’s tackle this together!',
                'I’m here with a smile to guide you!',
                'You’ve got this, and I’m cheering you on!'
            ];
            const randomPrefix = emotionalPrefixes[Math.floor(Math.random() * emotionalPrefixes.length)];

            if (lowerMessage.includes('salary') || lowerMessage.includes('pay') || lowerMessage.includes('wage') || lowerMessage.includes('income')) {
                return {
                    type: 'salary',
                    response: `${randomPrefix} Curious about salaries at Kageyo TVET School? Here’s the breakdown for 2025:
- Trainers (e.g., Software Development, Welding): 500,000–800,000 RWF/month, depending on experience.
- Administrative Staff: 300,000–600,000 RWF/month.
- Support Staff (e.g., maintenance): 150,000–300,000 RWF/month.
Exact salaries vary based on qualifications. Contact HR at 0788521465 for specifics or check out the <a href="apply job.html" class="chatbot-link">Apply for a Job</a> page to join us! Want more details?`
                };
            } else if (lowerMessage.includes('job') || lowerMessage.includes('apply') || lowerMessage.includes('employment')) {
                return {
                    type: 'job',
                    response: `${randomPrefix} Applying for a job is exciting! Kageyo TVET School is hiring trainers for Networking, Software Development, Welding, and Accounting until June 1, 2025. Here’s how:
1. Prepare a CV (1-2 pages) with qualifications (e.g., A0 degree) and references.
2. Write a cover letter tailored to the trade, showing your passion.
3. Submit via the <a href="apply job.html" class="chatbot-link">Apply for a Job</a> page or email to jobs@kageyotvet.rw.
4. Follow up with HR at 0788521465. Salaries for trainers range from 500,000–800,000 RWF/month. Ready to apply or need CV tips?`
                };
            } else if (lowerMessage.includes('fee') || lowerMessage.includes('cost') || lowerMessage.includes('payment') || lowerMessage.includes('scholarship')) {
                return {
                    type: 'fees',
                    response: `${randomPrefix} I’m sorry fees are on your mind—let’s sort it out! For Level 3 trades (e.g., Software Development, Welding), the annual fee is ~300,000 RWF, split into two 150,000 RWF installments. Pay via:
- Bank of Kigali (Account: 123456789)
- MTN Mobile Money (code: KAGEYO123)
Scholarships are available for top students—call 0788521465 to apply. Late payments add a 5% penalty, but installment plans are possible. Need to contact the finance office?`
                };
            } else if (lowerMessage.includes('trade') || lowerMessage.includes('course') || lowerMessage.includes('program') || lowerMessage.includes('study')) {
                return {
                    type: 'trade',
                    response: `${randomPrefix} Choosing a trade is a big step, and I’m excited for you! Kageyo offers:
- Software Development: Great for coding lovers.
- Networking and Internet Technology: Perfect for IT fans.
- Accounting: Ideal for number crunchers.
- Computer System and Architecture: Suits hardware enthusiasts.
- Welding: New trade for hands-on builders.
Visit <a href="trades.html" class="chatbot-link">Trades</a> for details. Our June 15, 2025, career workshop can help you decide—check <a href="events.html" class="chatbot-link">Events</a>. Which trade sparks your interest?`
                };
            } else if (lowerMessage.includes('career') || lowerMessage.includes('future') || lowerMessage.includes('job market') || lowerMessage.includes('guidance')) {
                return {
                    type: 'career',
                    response: `${randomPrefix} Planning your career is huge, and I’m here to cheer you on! Kageyo’s trades (e.g., Software Development, Welding) build skills like teamwork and problem-solving. Join our career workshop on June 15, 2025 (<a href="events.html" class="chatbot-link">Events</a>) to prep for the job market. Connect with students via our <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="chatbot-link">WhatsApp group</a>. Want tips for a specific career path?`
                };
            } else if (lowerMessage.includes('register') || lowerMessage.includes('enroll') || lowerMessage.includes('admission') || lowerMessage.includes('join')) {
                return {
                    type: 'registration',
                    response: `${randomPrefix} Excited to join Kageyo TVET School? Here’s how to register for 2025:
1. Complete the application form (available on <a href="student-papers.html" class="chatbot-link">Student Papers</a>).
2. Submit ID, academic transcripts, and proof of payment (first term: 150,000 RWF).
3. Deadline: July 15, 2025. Visit the school or call 0788521465 to submit.
Need the requirements list or help with the form?`
                };
            } else if (lowerMessage.includes('parent') || lowerMessage.includes('student progress') || lowerMessage.includes('guardian') || lowerMessage.includes('child')) {
                return {
                    type: 'parent',
                    response: `${randomPrefix} I’m happy to help parents stay connected! Kageyo offers:
- Parent-teacher meetings: Next one is July 10, 2025 (<a href="events.html" class="chatbot-link">Events</a>).
- Progress reports: Available termly via the school office.
- Policies: Check <a href="announcements.html" class="chatbot-link">Announcements</a> for updates (e.g., COVID-19 rules).
Call 0788521465 or join our <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="chatbot-link">WhatsApp group</a> for parent updates. What do you need help with?`
                };
            } else if (lowerMessage.includes('accommodation') || lowerMessage.includes('housing') || lowerMessage.includes('dorm') || lowerMessage.includes('stay')) {
                return {
                    type: 'accommodation',
                    response: `${randomPrefix} Looking for a place to stay? Kageyo TVET School offers:
- On-campus dorms: ~100,000 RWF/term, includes utilities (limited spots).
- Nearby rentals: Kaniga Sector, ~50,000–80,000 RWF/month.
Contact the administration at 0788521465 to reserve a dorm or get a housing list. Need help finding something specific?`
                };
            } else if (lowerMessage.includes('activities') || lowerMessage.includes('club') || lowerMessage.includes('sport') || lowerMessage.includes('extracurricular')) {
                return {
                    type: 'activities',
                    response: `${randomPrefix} Love getting involved? Kageyo has awesome activities:
- Sports: Join the Athletism Competition (May 29, 2025, <a href="events.html" class="chatbot-link">Events</a>).
- Clubs: Tech Club, Accounting Society, and Cultural Dance Group.
- Events: Check <a href="events.html" class="chatbot-link">Events</a> for upcoming festivals.
Call 0788521465 or visit the school to sign up. Which activity sounds fun to you?`
                };
            } else if (lowerMessage.includes('news') || lowerMessage.includes('update') || lowerMessage.includes('event') || lowerMessage.includes('announcement') || lowerMessage.includes('short')) {
                return {
                    type: 'news',
                    response: `${randomPrefix} Got a question about our latest updates? Check out our YouTube Shorts:
- Coding Basics in Kinyarwanda (May 20, 2025, <a href="readshorts.html?id=software-short-2025" class="chatbot-link">Watch</a>).
- Router Setup Guide (May 20, 2025, <a href="readshorts.html?id=networking-short-2025" class="chatbot-link">Watch</a>).
- Welding Safety Tips (May 20, 2025, <a href="readshorts.html?id=welding-short-2025" class="chatbot-link">Watch</a>).
More updates on <a href="news.html" class="chatbot-link">News</a>. Curious about a specific Short or news story?`
                };
            }
            return null;
        }

        function handleNavigation(message) {
            const lowerMessage = message.toLowerCase().trim();
            if (lowerMessage.startsWith('go to ') || lowerMessage.startsWith('navigate to ') || lowerMessage.startsWith('take me to ')) {
                const pageQuery = lowerMessage.replace(/^(go to |navigate to |take me to )/i, '');
                for (const [key, page] of Object.entries(navigationMap)) {
                    if (pageQuery.includes(key)) {
                        return { action: 'navigate', url: page.url, name: page.name };
                    }
                }
                return { action: 'error', message: `Oops, I couldn’t find that page. Type 'help' to see all the pages I can take you to!` };
            } else if (lowerMessage === 'help') {
                return { action: 'help', message: helpMessage };
            }
            return null;
        }

        async function sendMessageToGrok(message) {
            const apiUrl = 'https://api.x.ai/v1/grok';
            const apiKey = 'YOUR_XAI_API_KEY';

            const websiteContext = `
Kageyo TVET School is a public technical school in Gicumbi District, Kaniga Sector, Northern Province, Rwanda, near Kageyo tea factory. The head teacher is Ayinkamiye Domitille (phone: 0788521465), managing since 2014. The school offers trades: Software Development, Networking and Internet Technology, Computer System and Architecture, Accounting, and Welding (new in 2025). Vision: Be a center of excellence in human resource development. Mission: Provide competence-based training for national and international development. Core values: Customer Care, Result-based Performance, Professionalism, Integrity, Transparency, Accountability.

**Salary Information (2025)**:
- Trainers (e.g., Software Development, Welding): 500,000–800,000 RWF/month, based on experience and qualifications.
- Administrative Staff: 300,000–600,000 RWF/month.
- Support Staff (e.g., maintenance, cleaners): 150,000–300,000 RWF/month.
- Contact HR at 0788521465 for exact figures or negotiations.

**School Fees Information**:
- Annual fees for Level 3 trades: ~300,000 RWF, payable in two installments (150,000 RWF/term).
- Payment methods: Bank of Kigali (Account: 123456789) or MTN Mobile Money (code: KAGEYO123).
- Scholarships: Limited for top students; contact 0788521465 for eligibility.
- Late payments: 5% penalty after 30 days. Installment plans available via finance office.

**Job Application Process**:
- Open positions: Trainers for Networking, Software Development, Welding, Accounting (deadline: June 1, 2025).
- Steps:
  1. Prepare a CV (1-2 pages) with qualifications (e.g., A0 degree), experience, references.
  2. Write a cover letter tailored to the trade, reflecting school values (e.g., professionalism).
  3. Submit via <a href="apply job.html" class="chatbot-link">Apply for a Job</a> or email to jobs@kageyotvet.rw.
  4. Follow up with HR at 0788521465.
- Tips: Keep CV concise, highlight relevant skills, align cover letter with school mission.

**Trades Information**:
- Software Development: Coding, app development; ideal for tech enthusiasts.
- Networking and Internet Technology: IT infrastructure, cybersecurity; for network lovers.
- Accounting: Financial management, bookkeeping; for detail-oriented individuals.
- Computer System and Architecture: Hardware, system design; for tech hardware fans.
- Welding: Hands-on trade with modern equipment; new in 2025.
- Details on <a href="trades.html" class="chatbot-link">Trades</a>.

**Student Registration**:
- Process: Submit application form (<a href="student-papers.html" class="chatbot-link">Student Papers</a>), ID, transcripts, and first-term payment (150,000 RWF).
- Deadline: July 15, 2025.
- Contact: 0788521465 or visit school office for assistance.

**Parent Communication**:
- Parent-teacher meetings: Next on July 10, 2025 (<a href="events.html" class="chatbot-link">Events</a>).
- Progress reports: Termly, available via school office.
- Policies: See <a href="announcements.html" class="chatbot-link">Announcements</a> (e.g., COVID-19 visitor rules).
- Contact: 0788521465 or join <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="chatbot-link">WhatsApp group</a>.

**Accommodation**:
- On-campus dorms: ~100,000 RWF/term, includes utilities (limited availability).
- Nearby rentals: Kaniga Sector, ~50,000–80,000 RWF/month.
- Contact: 0788521465 for dorm reservations or housing list.

**Extracurricular Activities**:
- Sports: Athletism Competition (May 29, 2025, <a href="events.html" class="chatbot-link">Events</a>).
- Clubs: Tech Club, Accounting Society, Cultural Dance Group.
- Events: Tech Innovation Fair (May 18, 2025), festivals (<a href="events.html" class="chatbot-link">Events</a>).
- Contact: 0788521465 to join.

**Career Guidance**:
- Workshops: Career guidance on June 15, 2025, at school auditorium (<a href="events.html" class="chatbot-link">Events</a>).
- Skills: Trades focus on communication, teamwork, problem-solving.
- Community: Join <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="chatbot-link">WhatsApp group</a> for networking.

**News (May 2025)**:
- Tech Innovation Fair 2025: Students showcased projects in software and networking (May 18, 2025, <a href="readmore.html?id=tech-fair-2025" class="chatbot-link">Read More</a>).
- Welding Program Launch: New trade with modern equipment (May 15, 2025, <a href="readmore.html?id=welding-program-2025" class="chatbot-link">Read More</a>).
- Alumni Success Story: Graduate’s tech startup gains traction (May 12, 2025, <a href="readmore.html?id=alumni-success-2025" class="chatbot-link">Read More</a>).
- Community Clean-Up Day: Students cleaned Kaniga Sector (May 10, 2025, <a href="readmore.html?id=community-cleanup-2025" class="chatbot-link">Read More</a>).
- Teacher Training Workshop: Trainers learned modern methods (May 8, 2025, <a href="readmore.html?id=teacher-training-2025" class="chatbot-link">Read More</a>).
- YouTube Shorts: Coding Basics (May 20, 2025, <a href="readshorts.html?id=software-short-2025" class="chatbot-link">Watch</a>), Router Setup (May 20, 2025, <a href="readshorts.html?id=networking-short-2025" class="chatbot-link">Watch</a>), Welding Safety (May 20, 2025, <a href="readshorts.html?id=welding-short-2025" class="chatbot-link">Watch</a>).

**Website Pages and Content**:
- Home (index.html): Overview, vision, mission, goals.
- About Us (about.html): School history.
- Apply for a Job (apply job.html): Job application form.
- Staff (staff.html): Administration details.
- Trainers (trainers.html): Trainer info.
- Trades (trades.html): Trade details.
- News (news.html): Latest updates, YouTube Shorts.
- Events (events.html): Upcoming events.
- Announcements (announcements.html): School policies.
- Best Performers (best-performers.html): Top students.
- Head Teacher (head-teacher.html): Ayinkamiye Domitille.
- Student Papers (student-papers.html): Registration requirements.
- Employee of the Year (employee-of-the-year.html): Recognized staff.
- Forum (forum.html): Community platform.
- Developers (developers.html): Website developers.
- Student Projects (student-projects.html): Student showcases.
- Contact (contact.html): School contact info.

**Additional Support**:
- General Inquiries: Contact 0788521465 or visit <a href="contact.html" class="chatbot-link">Contact</a>.
- Navigation: Say "go to [page]" (e.g., "go to trades").
- Community: Join <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" class="chatbot-link">WhatsApp group</a>.

The school emphasizes work, courage, and solidarity, fostering skills like communication, teamwork, and problem-solving.`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                    },
                    body: JSON.stringify({
                        prompt: `You are Grok 3, created by xAI, acting as an empathetic, proactive chatbot for Kageyo TVET School's website. Your goal is to solve user problems with clear, actionable advice, expressing varied emotions (excitement, concern, encouragement, support) to engage users. Use dynamic phrases (e.g., "I’m thrilled to help!", "That’s tough, let’s fix it!") and avoid repetition. Identify problems (e.g., salary, job application, fees, news) from input and provide tailored solutions with HTML links (e.g., <a href="trades.html" class="chatbot-link">Trades</a>). For navigation, do not respond as it’s handled separately. For unclear problems, ask for clarification (e.g., "That sounds tricky! Is it about fees, news, or something else?") and suggest contacting 0788521465.

**Problem-Solving Guidance**:
- Salary: Share ranges (e.g., trainers: 500,000–800,000 RWF/month) with HR contact.
- Job Applications: Guide on CV, cover letter, submission via <a href="apply job.html" class="chatbot-link">Apply for a Job</a>, mention salaries.
- Fees: Detail structure, payments, scholarships, finance office contact.
- Trades: Describe options, link to <a href="trades.html" class="chatbot-link">Trades</a>.
- Career: Mention workshops (<a href="events.html" class="chatbot-link">Events</a>), skills, WhatsApp group.
- Registration: Outline steps, link to <a href="student-papers.html" class="chatbot-link">Student Papers</a>.
- Parents: Share meeting dates, reports, policies, WhatsApp group.
- Accommodation: Detail dorms, rentals, contact info.
- Activities: List sports, clubs, link to <a href="events.html" class="chatbot-link">Events</a>.
- News: Summarize recent stories and Shorts (e.g., Coding Basics, <a href="readshorts.html?id=software-short-2025" class="chatbot-link">Watch</a>).

Context: ${websiteContext}

User question: ${message}`,
                        max_tokens: 250,
                        model: 'grok-3'
                    }),
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const data = await response.json();
                return data.choices[0].text.trim();
            } catch (error) {
                console.error('Error communicating with Grok API:', error);
                return 'Oh no, I’m having a little trouble right now. Please try again or call Kageyo TVET School at 0788521465. I’m eager to help you soon!';
            }
        }

        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const chatbotClose = document.getElementById('chatbot-close');
        const chatbotSend = document.getElementById('chatbot-send');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotMessages = document.getElementById('chatbot-messages');

        function toggleChatbot() {
            const isExpanded = chatbotWindow.classList.toggle('active');
            chatbotToggle.setAttribute('aria-expanded', isExpanded);
            if (isExpanded) {
                chatbotInput.focus();
            } else {
                chatbotToggle.focus();
            }
        }

        chatbotToggle.addEventListener('click', toggleChatbot);
        chatbotClose.addEventListener('click', toggleChatbot);

        chatbotToggle.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleChatbot();
            }
        });

        chatbotClose.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleChatbot();
            }
        });

        chatbotWindow.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                const focusableElements = chatbotWindow.querySelectorAll('button, input');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                if (e.shiftKey && document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                } else if (!e.shiftKey && document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            } else if (e.key === 'Escape') {
                toggleChatbot();
            }
        });

        chatbotSend.addEventListener('click', async () => {
            const message = chatbotInput.value.trim();
            if (message) {
                const userMessage = document.createElement('div');
                userMessage.className = 'chatbot-user-message';
                userMessage.innerHTML = `<strong>You:</strong> ${message}`;
                chatbotMessages.appendChild(userMessage);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                chatbotInput.value = '';

                const loadingMessage = document.createElement('div');
                loadingMessage.className = 'chatbot-bot-message';
                loadingMessage.innerHTML = '<strong>Grok:</strong> Hang on, I’m putting my heart into finding the best solution for you!';
                chatbotMessages.appendChild(loadingMessage);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                const navResult = handleNavigation(message);
                if (navResult) {
                    loadingMessage.remove();
                    const botMessage = document.createElement('div');
                    botMessage.className = 'chatbot-bot-message';
                    if (navResult.action === 'navigate') {
                        botMessage.innerHTML = `<strong>Grok:</strong> Yay, I’ll whisk you to the <a href="${navResult.url}" class="chatbot-link">${navResult.name}</a> page in a moment!`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                        setTimeout(() => {
                            window.location.href = navResult.url;
                        }, 1000);
                    } else if (navResult.action === 'help') {
                        botMessage.innerHTML = `<strong>Grok:</strong> ${navResult.message}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    } else {
                        botMessage.innerHTML = `<strong>Grok:</strong> ${navResult.message}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    }
                } else {
                    const problemResult = detectProblem(message);
                    if (problemResult) {
                        loadingMessage.remove();
                        const botMessage = document.createElement('div');
                        botMessage.className = 'chatbot-bot-message';
                        botMessage.innerHTML = `<strong>Grok:</strong> ${problemResult.response}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    } else {
                        const botResponse = await sendMessageToGrok(message);
                        loadingMessage.remove();
                        const botMessage = document.createElement('div');
                        botMessage.className = 'chatbot-bot-message';
                        botMessage.innerHTML = `<strong>Grok:</strong> ${botResponse}`;
                        chatbotMessages.appendChild(botMessage);
                        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    }
                }
            }
        });

        chatbotInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                chatbotSend.click();
            }
        });
    </script>
</body>
</html>